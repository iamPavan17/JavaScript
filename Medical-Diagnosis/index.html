<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <title>Home</title>
</head>
<body>
    <div id="main">
    <div id='divBody'>

    </div></div>
    <!-- <input type='text' id="input"><br> -->
    <button type="submit" id="button">SUBMIT</button>
    <button type="submit" id="button1">SUBMIT</button>
</body>
<script>
    var divBodyHandler = document.getElementById('divBody');
    var buttonHandler = document.getElementById('button');
    var bodyLocationurl = 'https://sandbox-healthservice.priaid.ch/body/locations?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImlhbXBhdmFuMDVAZ21haWwuY29tIiwicm9sZSI6IlVzZXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9zaWQiOiI0ODg5IiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy92ZXJzaW9uIjoiMjAwIiwiaHR0cDovL2V4YW1wbGUub3JnL2NsYWltcy9saW1pdCI6Ijk5OTk5OTk5OSIsImh0dHA6Ly9leGFtcGxlLm9yZy9jbGFpbXMvbWVtYmVyc2hpcCI6IlByZW1pdW0iLCJodHRwOi8vZXhhbXBsZS5vcmcvY2xhaW1zL2xhbmd1YWdlIjoiZW4tZ2IiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL2V4cGlyYXRpb24iOiIyMDk5LTEyLTMxIiwiaHR0cDovL2V4YW1wbGUub3JnL2NsYWltcy9tZW1iZXJzaGlwc3RhcnQiOiIyMDE5LTA0LTAxIiwiaXNzIjoiaHR0cHM6Ly9zYW5kYm94LWF1dGhzZXJ2aWNlLnByaWFpZC5jaCIsImF1ZCI6Imh0dHBzOi8vaGVhbHRoc2VydmljZS5wcmlhaWQuY2giLCJleHAiOjE1NTcyMjM5MDYsIm5iZiI6MTU1NzIxNjcwNn0.FJjvucPZg-Zmjced4YKlyKTlNJMBLYopROPQP7on9C4&language=en-gb&format=json';
    axios.get(bodyLocationurl)
    .then((response) => {
        var selectList = document.createElement("select");
        selectList.id = "mySelect";
        divBodyHandler.appendChild(selectList);
        response.data.forEach((a) => {
            // console.log(a.Name);
            var option = document.createElement("option");
            option.value = a.ID;
            option.text = a.Name;
            selectList.appendChild(option);
        });
    });

    function getBodySubLocation(bodyLocationID) {
        var bodySubLocationurl = `https://sandbox-healthservice.priaid.ch/body/locations//${bodyLocationID}?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImlhbXBhdmFuMDVAZ21haWwuY29tIiwicm9sZSI6IlVzZXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9zaWQiOiI0ODg5IiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy92ZXJzaW9uIjoiMjAwIiwiaHR0cDovL2V4YW1wbGUub3JnL2NsYWltcy9saW1pdCI6Ijk5OTk5OTk5OSIsImh0dHA6Ly9leGFtcGxlLm9yZy9jbGFpbXMvbWVtYmVyc2hpcCI6IlByZW1pdW0iLCJodHRwOi8vZXhhbXBsZS5vcmcvY2xhaW1zL2xhbmd1YWdlIjoiZW4tZ2IiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL2V4cGlyYXRpb24iOiIyMDk5LTEyLTMxIiwiaHR0cDovL2V4YW1wbGUub3JnL2NsYWltcy9tZW1iZXJzaGlwc3RhcnQiOiIyMDE5LTA0LTAxIiwiaXNzIjoiaHR0cHM6Ly9zYW5kYm94LWF1dGhzZXJ2aWNlLnByaWFpZC5jaCIsImF1ZCI6Imh0dHBzOi8vaGVhbHRoc2VydmljZS5wcmlhaWQuY2giLCJleHAiOjE1NTcyMjM5MDYsIm5iZiI6MTU1NzIxNjcwNn0.FJjvucPZg-Zmjced4YKlyKTlNJMBLYopROPQP7on9C4&language=en-gb&format=json`
        axios.get(bodySubLocationurl)
        .then((response) => {
            var selectList = document.createElement("select");
            selectList.id = "mySelect";
            divBodyHandler.appendChild(selectList);
            response.data.forEach((a) => {
            // console.log(a.Name);
            var option = document.createElement("option");
            option.value = a.ID;
            option.text = a.Name;
            selectList.appendChild(option);
        });
        });
    }

    var count = 0;
    buttonHandler.addEventListener('click', () => {
        // console.log(document.getElementById('mySelect').value);
        var bodyLocationID = document.getElementById('mySelect').value;
        localStorage.setItem("bodyloc", bodyLocationID);
        divBodyHandler.innerHTML = "";
        getBodySubLocation(bodyLocationID);
        count++;
        if(count > 1) {
            document.getElementById('main').innerHTML = "";
            document.getElementById('button1').style.display = "";
            buttonHandler.style.display = "none";
        }
    });

    window.addEventListener('load', function(){
        document.getElementById('button1').style.display = "none";
    });
    
    var obj = [];

    document.getElementById('button1').addEventListener('click', () => {
        console.log(localStorage.bodyloc);
        var url = `https://sandbox-healthservice.priaid.ch/symptoms/${localStorage.bodyloc}/man?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImlhbXBhdmFuMDVAZ21haWwuY29tIiwicm9sZSI6IlVzZXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9zaWQiOiI0ODg5IiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy92ZXJzaW9uIjoiMjAwIiwiaHR0cDovL2V4YW1wbGUub3JnL2NsYWltcy9saW1pdCI6Ijk5OTk5OTk5OSIsImh0dHA6Ly9leGFtcGxlLm9yZy9jbGFpbXMvbWVtYmVyc2hpcCI6IlByZW1pdW0iLCJodHRwOi8vZXhhbXBsZS5vcmcvY2xhaW1zL2xhbmd1YWdlIjoiZW4tZ2IiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL2V4cGlyYXRpb24iOiIyMDk5LTEyLTMxIiwiaHR0cDovL2V4YW1wbGUub3JnL2NsYWltcy9tZW1iZXJzaGlwc3RhcnQiOiIyMDE5LTA0LTAxIiwiaXNzIjoiaHR0cHM6Ly9zYW5kYm94LWF1dGhzZXJ2aWNlLnByaWFpZC5jaCIsImF1ZCI6Imh0dHBzOi8vaGVhbHRoc2VydmljZS5wcmlhaWQuY2giLCJleHAiOjE1NTcyMjM5MDYsIm5iZiI6MTU1NzIxNjcwNn0.FJjvucPZg-Zmjced4YKlyKTlNJMBLYopROPQP7on9C4&language=en-gb&format=json`;

        axios.get(url)
        .then((response) => {
            console.log(response.data);
            response.data.forEach((a) => {
                obj.push(a);
            });
            // console.log(obj[0]);
        });

        
    });

</script>
</html>